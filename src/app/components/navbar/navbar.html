<mat-toolbar color="primary" class="navbar">
  <div class="navbar-content">
    <!-- Logo y Título -->
    <div class="navbar-brand" routerLink="/">
      <img src="logo.ico" alt="MoodSound logo" class="brand-logo" />
      <span class="brand-name">MoodSound</span>
    </div>

    <div class="navbar-menu">
     

      
      <ng-container *ngIf="authService.isAuthenticated()">
        <button 
          mat-button 
          (click)="goToFavorites()"
          [matBadge]="favoriteCount"
          [matBadgeHidden]="favoriteCount === 0"
          matBadgeColor="accent">
          <mat-icon>favorite</mat-icon>
          Favoritos
        </button>

        <!-- Menú de usuario -->
        <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-button">
          <div class="user-avatar">{{ userInitial }}</div>
          
          <mat-icon>arrow_drop_down</mat-icon>
        </button>

        <mat-menu #userMenu="matMenu">
          <div class="user-menu-header">
            <div class="user-avatar-large">{{ userInitial }}</div>
            <div class="user-info">
              <p class="user-full-name">{{ userName }}</p>
              <p class="user-email">{{ authService.currentUser()?.email }}</p>
            </div>
          </div>
          
          <mat-divider></mat-divider>
          
          <button mat-menu-item (click)="goToFavorites()">
            <mat-icon>favorite</mat-icon>
            <span>Mis Favoritos</span>
          </button>
          
          <button mat-menu-item (click)="goToProfile()">
            <mat-icon>person</mat-icon>
            <span>Mi Perfil</span>
          </button>
          
          <mat-divider></mat-divider>
          
          <button mat-menu-item (click)="logout()">
            <mat-icon>exit_to_app</mat-icon>
            <span>Cerrar Sesión</span>
          </button>
        </mat-menu>
      </ng-container>

      <!-- Si NO está autenticado -->
      <ng-container *ngIf="!authService.isAuthenticated()">
        <button mat-button routerLink="/login">
          <mat-icon>login</mat-icon>
          Iniciar Sesión
        </button>
        
        <button mat-raised-button color="accent" class="register-button" routerLink="/register">
          Registrarse
        </button>
      </ng-container>
    </div>
  </div>
</mat-toolbar>